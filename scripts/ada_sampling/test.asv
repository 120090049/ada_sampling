length = 200;
width = 100;
[Xss, ksx_g, ksy_g] = generate_coordinates(length, width);

A = zeros(20, 10);

for i = 1:size(A, 1)
    for j = 1:size(A, 2)
        A(i, j) = A(i, j) + 1;
    end
end

A

B = reshape(A, [], 1);


function [Xss, ksx_g, ksy_g] = generate_coordinates(length, width)
    [X, Y] = meshgrid(0:length-1, 0:width-1);
    Xss = [X(:), Y(:)];
    ksx_g = repmat(0:width-1, length, 1);
    ksy_g = repmat(0:length-1, width, 1)';
end
